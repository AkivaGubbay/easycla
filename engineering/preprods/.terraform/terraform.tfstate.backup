{
    "version": 3,
    "terraform_version": "0.8.7",
    "serial": 12,
    "lineage": "f967c4bb-f9ba-4309-99b6-465d55a7217c",
    "remote": {
        "type": "s3",
        "config": {
            "access_key": "AKIAJZSPEM5HOEMPP67Q",
            "bucket": "lfe-terraform-states",
            "key": "preprods/ecs/terraform.tfstate",
            "region": "us-west-2",
            "secret_key": "VtFYzpbv+TC9RGxEHVEDAneRMGAfVUaW+GswaruV"
        }
    },
    "modules": [
        {
            "path": [
                "root"
            ],
            "outputs": {},
            "resources": {
                "aws_s3_bucket.engineering-database-backups": {
                    "type": "aws_s3_bucket",
                    "depends_on": [],
                    "primary": {
                        "id": "engineering-database-backups",
                        "attributes": {
                            "acceleration_status": "",
                            "acl": "private",
                            "arn": "arn:aws:s3:::engineering-database-backups",
                            "bucket": "engineering-database-backups",
                            "bucket_domain_name": "engineering-database-backups.s3.amazonaws.com",
                            "force_destroy": "false",
                            "hosted_zone_id": "Z3BJ6K6RIION7M",
                            "id": "engineering-database-backups",
                            "region": "us-west-2",
                            "request_payer": "BucketOwner",
                            "tags.%": "2",
                            "tags.Environment": "Production",
                            "tags.Name": "Engineering Database Backups",
                            "versioning.#": "1",
                            "versioning.0.enabled": "false",
                            "versioning.0.mfa_delete": "false",
                            "website.#": "0"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_security_group.preprods": {
                    "type": "aws_security_group",
                    "depends_on": [
                        "data.terraform_remote_state.engineering"
                    ],
                    "primary": {
                        "id": "sg-a04c11d8",
                        "attributes": {
                            "description": "Centralized SG for all the Preprods using the Tools ECS Cluster",
                            "egress.#": "1",
                            "egress.482069346.cidr_blocks.#": "1",
                            "egress.482069346.cidr_blocks.0": "0.0.0.0/0",
                            "egress.482069346.from_port": "0",
                            "egress.482069346.prefix_list_ids.#": "0",
                            "egress.482069346.protocol": "-1",
                            "egress.482069346.security_groups.#": "0",
                            "egress.482069346.self": "false",
                            "egress.482069346.to_port": "0",
                            "id": "sg-a04c11d8",
                            "ingress.#": "3",
                            "ingress.4048531985.cidr_blocks.#": "0",
                            "ingress.4048531985.from_port": "22",
                            "ingress.4048531985.protocol": "tcp",
                            "ingress.4048531985.security_groups.#": "1",
                            "ingress.4048531985.security_groups.3482049312": "sg-6dcc8c15",
                            "ingress.4048531985.self": "false",
                            "ingress.4048531985.to_port": "22",
                            "ingress.4102586995.cidr_blocks.#": "0",
                            "ingress.4102586995.from_port": "0",
                            "ingress.4102586995.protocol": "-1",
                            "ingress.4102586995.security_groups.#": "1",
                            "ingress.4102586995.security_groups.985597583": "sg-4a044a32",
                            "ingress.4102586995.self": "false",
                            "ingress.4102586995.to_port": "0",
                            "ingress.4113753681.cidr_blocks.#": "1",
                            "ingress.4113753681.cidr_blocks.0": "70.50.10.221/32",
                            "ingress.4113753681.from_port": "22",
                            "ingress.4113753681.protocol": "tcp",
                            "ingress.4113753681.security_groups.#": "0",
                            "ingress.4113753681.self": "false",
                            "ingress.4113753681.to_port": "22",
                            "name": "engineering-preprods",
                            "owner_id": "433610389961",
                            "tags.%": "1",
                            "tags.Name": "Preprods: ECS Cluster",
                            "vpc_id": "vpc-21254546"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_security_group_rule.allow_elb": {
                    "type": "aws_security_group_rule",
                    "depends_on": [
                        "aws_security_group.preprods",
                        "data.terraform_remote_state.engineering"
                    ],
                    "primary": {
                        "id": "sgrule-3964370650",
                        "attributes": {
                            "cidr_blocks.#": "0",
                            "from_port": "0",
                            "id": "sgrule-3964370650",
                            "prefix_list_ids.#": "0",
                            "protocol": "-1",
                            "security_group_id": "sg-a04c11d8",
                            "self": "false",
                            "source_security_group_id": "sg-4a044a32",
                            "to_port": "0",
                            "type": "ingress"
                        },
                        "meta": {
                            "schema_version": "2"
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_security_group_rule.allow_out": {
                    "type": "aws_security_group_rule",
                    "depends_on": [
                        "aws_security_group.preprods"
                    ],
                    "primary": {
                        "id": "sgrule-2296045033",
                        "attributes": {
                            "cidr_blocks.#": "1",
                            "cidr_blocks.0": "0.0.0.0/0",
                            "from_port": "-1",
                            "id": "sgrule-2296045033",
                            "prefix_list_ids.#": "0",
                            "protocol": "-1",
                            "security_group_id": "sg-a04c11d8",
                            "self": "false",
                            "to_port": "-1",
                            "type": "egress"
                        },
                        "meta": {
                            "schema_version": "2"
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "data.template_file.ecs_cloud_config": {
                    "type": "template_file",
                    "depends_on": [],
                    "primary": {
                        "id": "65498d437edc2e16bb46b9319273d171c039cf3b423375857212b66ad0deb221",
                        "attributes": {
                            "id": "65498d437edc2e16bb46b9319273d171c039cf3b423375857212b66ad0deb221",
                            "rendered": "#!/bin/bash\n\n# Join the default ECS cluster\necho ECS_CLUSTER=engineering-preprods \u003e\u003e /etc/ecs/ecs.config\n\nPATH=$PATH:/usr/local/bin\n\n# Instance should be added to an security group that allows HTTP outbound\nyum update -y\n\n# Install packages\nyum -y install jq nfs-utils python27 python27-pip\n\nEC2_INSTANCE_ID=`curl -s http://169.254.169.254/latest/meta-data/instance-id`\n\n#NewRelic Installation\nrpm -Uvh https://download.newrelic.com/pub/newrelic/el5/i386/newrelic-repo-5-3.noarch.rpm\nyum install newrelic-sysmond -y\nusermod -a -G docker newrelic\nnrsysmond-config --set license_key=951db34ebed364ea663002571b63db5d3f827758\nsed -i '/#hostname*/c\\hostname=\\\"Engineering Preprods - ECS Container Instance ('$EC2_INSTANCE_ID')\\\"' /etc/newrelic/nrsysmond.cfg\nsed -i '/#labels*/c\\labels=Environment:Preprod;Team:Engineering;Datacenter:AWS' /etc/newrelic/nrsysmond.cfg\n/etc/init.d/newrelic-sysmond start\n\n# Using a different CIDR for Docker (not to conflict with coreIT VPC CIDR)\nsed -i '$ d' /etc/sysconfig/docker\necho 'OPTIONS=\"--default-ulimit nofile=1024:4096 --bip=192.168.5.1/24\"' \u003e\u003e /etc/sysconfig/docker\nservice docker stop\nip link set docker0 down\nip link delete docker0\nservice docker start\n\n# Restarting ECS\nstart ecs\n",
                            "template": "#!/bin/bash\n\n# Join the default ECS cluster\necho ECS_CLUSTER=${ecs_cluster_name} \u003e\u003e /etc/ecs/ecs.config\n\nPATH=$PATH:/usr/local/bin\n\n# Instance should be added to an security group that allows HTTP outbound\nyum update -y\n\n# Install packages\nyum -y install jq nfs-utils python27 python27-pip\n\nEC2_INSTANCE_ID=`curl -s http://169.254.169.254/latest/meta-data/instance-id`\n\n#NewRelic Installation\nrpm -Uvh https://download.newrelic.com/pub/newrelic/el5/i386/newrelic-repo-5-3.noarch.rpm\nyum install newrelic-sysmond -y\nusermod -a -G docker newrelic\nnrsysmond-config --set license_key=${newrelic_key}\nsed -i '/#hostname*/c\\hostname=\\\"${newrelic_hostname} ('$EC2_INSTANCE_ID')\\\"' /etc/newrelic/nrsysmond.cfg\nsed -i '/#labels*/c\\labels=${newrelic_labels}' /etc/newrelic/nrsysmond.cfg\n/etc/init.d/newrelic-sysmond start\n\n# Using a different CIDR for Docker (not to conflict with coreIT VPC CIDR)\nsed -i '$ d' /etc/sysconfig/docker\necho 'OPTIONS=\"--default-ulimit nofile=1024:4096 --bip=192.168.5.1/24\"' \u003e\u003e /etc/sysconfig/docker\nservice docker stop\nip link set docker0 down\nip link delete docker0\nservice docker start\n\n# Restarting ECS\nstart ecs\n",
                            "vars.%": "4",
                            "vars.ecs_cluster_name": "engineering-preprods",
                            "vars.newrelic_hostname": "Engineering Preprods - ECS Container Instance",
                            "vars.newrelic_key": "951db34ebed364ea663002571b63db5d3f827758",
                            "vars.newrelic_labels": "Environment:Preprod;Team:Engineering;Datacenter:AWS"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "data.terraform_remote_state.engineering": {
                    "type": "terraform_remote_state",
                    "depends_on": [],
                    "primary": {
                        "id": "2017-03-08 19:30:13.456768196 +0000 UTC",
                        "attributes": {
                            "availability_zones.#": "3",
                            "availability_zones.0": "us-west-2a",
                            "availability_zones.1": "us-west-2b",
                            "availability_zones.2": "us-west-2c",
                            "backend": "s3",
                            "cidr": "10.40.0.0/16",
                            "config.%": "3",
                            "config.bucket": "lfe-terraform-states",
                            "config.key": "general/terraform.tfstate",
                            "config.region": "us-west-2",
                            "domain_name": "engineering.local",
                            "external_route_tables": "rtb-24b9bf43",
                            "external_subnets.#": "3",
                            "external_subnets.0": "subnet-56fe231f",
                            "external_subnets.1": "subnet-d973c8be",
                            "external_subnets.2": "subnet-192b1441",
                            "id": "2017-03-08 19:30:13.456768196 +0000 UTC",
                            "internal_route_tables": "rtb-27b9bf40,rtb-25b9bf42,rtb-23b9bf44",
                            "internal_subnets.#": "3",
                            "internal_subnets.0": "subnet-57fe231e",
                            "internal_subnets.1": "subnet-da73c8bd",
                            "internal_subnets.2": "subnet-1a2b1442",
                            "region": "us-west-2",
                            "sg_external_elb": "sg-4a044a32",
                            "sg_external_ssh": "sg-6dcc8c15",
                            "sg_internal_elb": "sg-49044a31",
                            "sg_internal_ssh": "sg-5dcc8c25",
                            "sg_vpn": "sg-3307494b",
                            "vpc_id": "vpc-21254546",
                            "vpc_security_group": "sg-7ccc8c04",
                            "zone_id": "Z1TA0POP3MZIJ5"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                }
            },
            "depends_on": []
        },
        {
            "path": [
                "root",
                "engineering-preprods-ecs-cluster"
            ],
            "outputs": {
                "asg_name": {
                    "sensitive": false,
                    "type": "string",
                    "value": "engineering-preprods-ecs-instances"
                },
                "name": {
                    "sensitive": false,
                    "type": "string",
                    "value": "engineering-preprods"
                },
                "security_group_id": {
                    "sensitive": false,
                    "type": "string",
                    "value": "sg-a04c11d8"
                }
            },
            "resources": {
                "aws_autoscaling_group.main": {
                    "type": "aws_autoscaling_group",
                    "depends_on": [
                        "aws_launch_configuration.main"
                    ],
                    "primary": {
                        "id": "engineering-preprods-ecs-instances",
                        "attributes": {
                            "arn": "arn:aws:autoscaling:us-west-2:433610389961:autoScalingGroup:903bc017-0411-43b6-b7ef-539d2109cdb2:autoScalingGroupName/engineering-preprods-ecs-instances",
                            "availability_zones.#": "3",
                            "availability_zones.2050015877": "us-west-2c",
                            "availability_zones.221770259": "us-west-2b",
                            "availability_zones.2487133097": "us-west-2a",
                            "default_cooldown": "300",
                            "desired_capacity": "3",
                            "force_delete": "false",
                            "health_check_grace_period": "300",
                            "health_check_type": "EC2",
                            "id": "engineering-preprods-ecs-instances",
                            "launch_configuration": "engineering-preprods-ecs-002b5cfe74d88a14bade0bd710",
                            "load_balancers.#": "0",
                            "max_size": "100",
                            "metrics_granularity": "1Minute",
                            "min_size": "3",
                            "name": "engineering-preprods-ecs-instances",
                            "placement_group": "",
                            "protect_from_scale_in": "false",
                            "suspended_processes.#": "0",
                            "tag.#": "4",
                            "tag.1472737440.key": "Name",
                            "tag.1472737440.propagate_at_launch": "true",
                            "tag.1472737440.value": "engineering-preprods",
                            "tag.1788462873.key": "Environment",
                            "tag.1788462873.propagate_at_launch": "true",
                            "tag.1788462873.value": "Preprod",
                            "tag.4278623214.key": "Cluster",
                            "tag.4278623214.propagate_at_launch": "true",
                            "tag.4278623214.value": "engineering-preprods",
                            "tag.534765253.key": "Team",
                            "tag.534765253.propagate_at_launch": "true",
                            "tag.534765253.value": "Engineering",
                            "target_group_arns.#": "0",
                            "termination_policies.#": "2",
                            "termination_policies.0": "OldestLaunchConfiguration",
                            "termination_policies.1": "Default",
                            "vpc_zone_identifier.#": "3",
                            "vpc_zone_identifier.1395724225": "subnet-d973c8be",
                            "vpc_zone_identifier.4088452313": "subnet-192b1441",
                            "vpc_zone_identifier.990885186": "subnet-56fe231f",
                            "wait_for_capacity_timeout": "10m"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_autoscaling_policy.scale_down": {
                    "type": "aws_autoscaling_policy",
                    "depends_on": [
                        "aws_autoscaling_group.main"
                    ],
                    "primary": {
                        "id": "engineering-preprods-scaledown",
                        "attributes": {
                            "adjustment_type": "ChangeInCapacity",
                            "arn": "arn:aws:autoscaling:us-west-2:433610389961:scalingPolicy:c187655a-b7d4-4488-a2b9-3ac6f75f228d:autoScalingGroupName/engineering-preprods-ecs-instances:policyName/engineering-preprods-scaledown",
                            "autoscaling_group_name": "engineering-preprods-ecs-instances",
                            "cooldown": "300",
                            "estimated_instance_warmup": "0",
                            "id": "engineering-preprods-scaledown",
                            "metric_aggregation_type": "",
                            "min_adjustment_step": "0",
                            "name": "engineering-preprods-scaledown",
                            "policy_type": "SimpleScaling",
                            "scaling_adjustment": "-1",
                            "step_adjustment.#": "0"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_autoscaling_policy.scale_up": {
                    "type": "aws_autoscaling_policy",
                    "depends_on": [
                        "aws_autoscaling_group.main"
                    ],
                    "primary": {
                        "id": "engineering-preprods-scaleup",
                        "attributes": {
                            "adjustment_type": "ChangeInCapacity",
                            "arn": "arn:aws:autoscaling:us-west-2:433610389961:scalingPolicy:1c309003-f9b3-4172-9ae6-54fbd542dc06:autoScalingGroupName/engineering-preprods-ecs-instances:policyName/engineering-preprods-scaleup",
                            "autoscaling_group_name": "engineering-preprods-ecs-instances",
                            "cooldown": "300",
                            "estimated_instance_warmup": "0",
                            "id": "engineering-preprods-scaleup",
                            "metric_aggregation_type": "",
                            "min_adjustment_step": "0",
                            "name": "engineering-preprods-scaleup",
                            "policy_type": "SimpleScaling",
                            "scaling_adjustment": "1",
                            "step_adjustment.#": "0"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_cloudwatch_metric_alarm.cpu_high": {
                    "type": "aws_cloudwatch_metric_alarm",
                    "depends_on": [
                        "aws_autoscaling_policy.scale_up",
                        "aws_ecs_cluster.main"
                    ],
                    "primary": {
                        "id": "engineering-preprods-cpureservation-high",
                        "attributes": {
                            "actions_enabled": "true",
                            "alarm_actions.#": "1",
                            "alarm_actions.887230746": "arn:aws:autoscaling:us-west-2:433610389961:scalingPolicy:1c309003-f9b3-4172-9ae6-54fbd542dc06:autoScalingGroupName/engineering-preprods-ecs-instances:policyName/engineering-preprods-scaleup",
                            "alarm_description": "Scale up if the cpu reservation is above 90% for 10 minutes",
                            "alarm_name": "engineering-preprods-cpureservation-high",
                            "comparison_operator": "GreaterThanOrEqualToThreshold",
                            "dimensions.%": "1",
                            "dimensions.ClusterName": "engineering-preprods",
                            "evaluation_periods": "2",
                            "extended_statistic": "",
                            "id": "engineering-preprods-cpureservation-high",
                            "insufficient_data_actions.#": "0",
                            "metric_name": "CPUReservation",
                            "namespace": "AWS/ECS",
                            "ok_actions.#": "0",
                            "period": "300",
                            "statistic": "Maximum",
                            "threshold": "90",
                            "unit": ""
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_cloudwatch_metric_alarm.cpu_low": {
                    "type": "aws_cloudwatch_metric_alarm",
                    "depends_on": [
                        "aws_autoscaling_policy.scale_down",
                        "aws_cloudwatch_metric_alarm.memory_high",
                        "aws_ecs_cluster.main"
                    ],
                    "primary": {
                        "id": "engineering-preprods-cpureservation-low",
                        "attributes": {
                            "actions_enabled": "true",
                            "alarm_actions.#": "1",
                            "alarm_actions.1595213151": "arn:aws:autoscaling:us-west-2:433610389961:scalingPolicy:c187655a-b7d4-4488-a2b9-3ac6f75f228d:autoScalingGroupName/engineering-preprods-ecs-instances:policyName/engineering-preprods-scaledown",
                            "alarm_description": "Scale down if the cpu reservation is below 10% for 10 minutes",
                            "alarm_name": "engineering-preprods-cpureservation-low",
                            "comparison_operator": "LessThanOrEqualToThreshold",
                            "dimensions.%": "1",
                            "dimensions.ClusterName": "engineering-preprods",
                            "evaluation_periods": "2",
                            "extended_statistic": "",
                            "id": "engineering-preprods-cpureservation-low",
                            "insufficient_data_actions.#": "0",
                            "metric_name": "CPUReservation",
                            "namespace": "AWS/ECS",
                            "ok_actions.#": "0",
                            "period": "300",
                            "statistic": "Maximum",
                            "threshold": "10",
                            "unit": ""
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_cloudwatch_metric_alarm.memory_high": {
                    "type": "aws_cloudwatch_metric_alarm",
                    "depends_on": [
                        "aws_autoscaling_policy.scale_up",
                        "aws_cloudwatch_metric_alarm.cpu_high",
                        "aws_ecs_cluster.main"
                    ],
                    "primary": {
                        "id": "engineering-preprods-memoryreservation-high",
                        "attributes": {
                            "actions_enabled": "true",
                            "alarm_actions.#": "1",
                            "alarm_actions.887230746": "arn:aws:autoscaling:us-west-2:433610389961:scalingPolicy:1c309003-f9b3-4172-9ae6-54fbd542dc06:autoScalingGroupName/engineering-preprods-ecs-instances:policyName/engineering-preprods-scaleup",
                            "alarm_description": "Scale up if the memory reservation is above 90% for 10 minutes",
                            "alarm_name": "engineering-preprods-memoryreservation-high",
                            "comparison_operator": "GreaterThanOrEqualToThreshold",
                            "dimensions.%": "1",
                            "dimensions.ClusterName": "engineering-preprods",
                            "evaluation_periods": "2",
                            "extended_statistic": "",
                            "id": "engineering-preprods-memoryreservation-high",
                            "insufficient_data_actions.#": "0",
                            "metric_name": "MemoryReservation",
                            "namespace": "AWS/ECS",
                            "ok_actions.#": "0",
                            "period": "300",
                            "statistic": "Maximum",
                            "threshold": "90",
                            "unit": ""
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_cloudwatch_metric_alarm.memory_low": {
                    "type": "aws_cloudwatch_metric_alarm",
                    "depends_on": [
                        "aws_autoscaling_policy.scale_down",
                        "aws_cloudwatch_metric_alarm.cpu_low",
                        "aws_ecs_cluster.main"
                    ],
                    "primary": {
                        "id": "engineering-preprods-memoryreservation-low",
                        "attributes": {
                            "actions_enabled": "true",
                            "alarm_actions.#": "1",
                            "alarm_actions.1595213151": "arn:aws:autoscaling:us-west-2:433610389961:scalingPolicy:c187655a-b7d4-4488-a2b9-3ac6f75f228d:autoScalingGroupName/engineering-preprods-ecs-instances:policyName/engineering-preprods-scaledown",
                            "alarm_description": "Scale down if the memory reservation is below 10% for 10 minutes",
                            "alarm_name": "engineering-preprods-memoryreservation-low",
                            "comparison_operator": "LessThanOrEqualToThreshold",
                            "dimensions.%": "1",
                            "dimensions.ClusterName": "engineering-preprods",
                            "evaluation_periods": "2",
                            "extended_statistic": "",
                            "id": "engineering-preprods-memoryreservation-low",
                            "insufficient_data_actions.#": "0",
                            "metric_name": "MemoryReservation",
                            "namespace": "AWS/ECS",
                            "ok_actions.#": "0",
                            "period": "300",
                            "statistic": "Maximum",
                            "threshold": "10",
                            "unit": ""
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_ecs_cluster.main": {
                    "type": "aws_ecs_cluster",
                    "depends_on": [],
                    "primary": {
                        "id": "arn:aws:ecs:us-west-2:433610389961:cluster/engineering-preprods",
                        "attributes": {
                            "id": "arn:aws:ecs:us-west-2:433610389961:cluster/engineering-preprods",
                            "name": "engineering-preprods"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_launch_configuration.main": {
                    "type": "aws_launch_configuration",
                    "depends_on": [],
                    "primary": {
                        "id": "engineering-preprods-ecs-002b5cfe74d88a14bade0bd710",
                        "attributes": {
                            "associate_public_ip_address": "false",
                            "ebs_block_device.#": "1",
                            "ebs_block_device.504524833.delete_on_termination": "true",
                            "ebs_block_device.504524833.device_name": "/dev/xvdcz",
                            "ebs_block_device.504524833.encrypted": "false",
                            "ebs_block_device.504524833.iops": "0",
                            "ebs_block_device.504524833.snapshot_id": "",
                            "ebs_block_device.504524833.volume_size": "25",
                            "ebs_block_device.504524833.volume_type": "gp2",
                            "ebs_optimized": "false",
                            "enable_monitoring": "true",
                            "ephemeral_block_device.#": "0",
                            "iam_instance_profile": "arn:aws:iam::433610389961:instance-profile/ecsInstanceRole",
                            "id": "engineering-preprods-ecs-002b5cfe74d88a14bade0bd710",
                            "image_id": "ami-022b9262",
                            "instance_type": "t2.medium",
                            "key_name": "engineering-preprods",
                            "name": "engineering-preprods-ecs-002b5cfe74d88a14bade0bd710",
                            "name_prefix": "engineering-preprods-ecs-",
                            "root_block_device.#": "1",
                            "root_block_device.0.delete_on_termination": "true",
                            "root_block_device.0.iops": "0",
                            "root_block_device.0.volume_size": "25",
                            "root_block_device.0.volume_type": "gp2",
                            "security_groups.#": "1",
                            "security_groups.4248089836": "sg-a04c11d8",
                            "spot_price": "",
                            "user_data": "d34932b33bea4ecc8537a0fde7fec9e586a15926",
                            "vpc_classic_link_id": "",
                            "vpc_classic_link_security_groups.#": "0"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "data.template_cloudinit_config.cloud_config": {
                    "type": "template_cloudinit_config",
                    "depends_on": [],
                    "primary": {
                        "id": "2046489173",
                        "attributes": {
                            "base64_encode": "true",
                            "gzip": "false",
                            "id": "2046489173",
                            "part.#": "1",
                            "part.0.content": "#!/bin/bash\n\n# Join the default ECS cluster\necho ECS_CLUSTER=engineering-preprods \u003e\u003e /etc/ecs/ecs.config\n\nPATH=$PATH:/usr/local/bin\n\n# Instance should be added to an security group that allows HTTP outbound\nyum update -y\n\n# Install packages\nyum -y install jq nfs-utils python27 python27-pip\n\nEC2_INSTANCE_ID=`curl -s http://169.254.169.254/latest/meta-data/instance-id`\n\n#NewRelic Installation\nrpm -Uvh https://download.newrelic.com/pub/newrelic/el5/i386/newrelic-repo-5-3.noarch.rpm\nyum install newrelic-sysmond -y\nusermod -a -G docker newrelic\nnrsysmond-config --set license_key=951db34ebed364ea663002571b63db5d3f827758\nsed -i '/#hostname*/c\\hostname=\\\"Engineering Preprods - ECS Container Instance ('$EC2_INSTANCE_ID')\\\"' /etc/newrelic/nrsysmond.cfg\nsed -i '/#labels*/c\\labels=Environment:Preprod;Team:Engineering;Datacenter:AWS' /etc/newrelic/nrsysmond.cfg\n/etc/init.d/newrelic-sysmond start\n\n# Using a different CIDR for Docker (not to conflict with coreIT VPC CIDR)\nsed -i '$ d' /etc/sysconfig/docker\necho 'OPTIONS=\"--default-ulimit nofile=1024:4096 --bip=192.168.5.1/24\"' \u003e\u003e /etc/sysconfig/docker\nservice docker stop\nip link set docker0 down\nip link delete docker0\nservice docker start\n\n# Restarting ECS\nstart ecs\n",
                            "part.0.content_type": "",
                            "part.0.filename": "",
                            "part.0.merge_type": "",
                            "rendered": "Q29udGVudC1UeXBlOiBtdWx0aXBhcnQvbWl4ZWQ7IGJvdW5kYXJ5PSJNSU1FQk9VTkRBUlkiCk1JTUUtVmVyc2lvbjogMS4wDQotLU1JTUVCT1VOREFSWQ0KQ29udGVudC1UcmFuc2Zlci1FbmNvZGluZzogN2JpdA0KQ29udGVudC1UeXBlOiB0ZXh0L3BsYWluDQpNaW1lLVZlcnNpb246IDEuMA0KDQojIS9iaW4vYmFzaAoKIyBKb2luIHRoZSBkZWZhdWx0IEVDUyBjbHVzdGVyCmVjaG8gRUNTX0NMVVNURVI9ZW5naW5lZXJpbmctcHJlcHJvZHMgPj4gL2V0Yy9lY3MvZWNzLmNvbmZpZwoKUEFUSD0kUEFUSDovdXNyL2xvY2FsL2JpbgoKIyBJbnN0YW5jZSBzaG91bGQgYmUgYWRkZWQgdG8gYW4gc2VjdXJpdHkgZ3JvdXAgdGhhdCBhbGxvd3MgSFRUUCBvdXRib3VuZAp5dW0gdXBkYXRlIC15CgojIEluc3RhbGwgcGFja2FnZXMKeXVtIC15IGluc3RhbGwganEgbmZzLXV0aWxzIHB5dGhvbjI3IHB5dGhvbjI3LXBpcAoKRUMyX0lOU1RBTkNFX0lEPWBjdXJsIC1zIGh0dHA6Ly8xNjkuMjU0LjE2OS4yNTQvbGF0ZXN0L21ldGEtZGF0YS9pbnN0YW5jZS1pZGAKCiNOZXdSZWxpYyBJbnN0YWxsYXRpb24KcnBtIC1VdmggaHR0cHM6Ly9kb3dubG9hZC5uZXdyZWxpYy5jb20vcHViL25ld3JlbGljL2VsNS9pMzg2L25ld3JlbGljLXJlcG8tNS0zLm5vYXJjaC5ycG0KeXVtIGluc3RhbGwgbmV3cmVsaWMtc3lzbW9uZCAteQp1c2VybW9kIC1hIC1HIGRvY2tlciBuZXdyZWxpYwpucnN5c21vbmQtY29uZmlnIC0tc2V0IGxpY2Vuc2Vfa2V5PTk1MWRiMzRlYmVkMzY0ZWE2NjMwMDI1NzFiNjNkYjVkM2Y4Mjc3NTgKc2VkIC1pICcvI2hvc3RuYW1lKi9jXGhvc3RuYW1lPVwiRW5naW5lZXJpbmcgUHJlcHJvZHMgLSBFQ1MgQ29udGFpbmVyIEluc3RhbmNlICgnJEVDMl9JTlNUQU5DRV9JRCcpXCInIC9ldGMvbmV3cmVsaWMvbnJzeXNtb25kLmNmZwpzZWQgLWkgJy8jbGFiZWxzKi9jXGxhYmVscz1FbnZpcm9ubWVudDpQcmVwcm9kO1RlYW06RW5naW5lZXJpbmc7RGF0YWNlbnRlcjpBV1MnIC9ldGMvbmV3cmVsaWMvbnJzeXNtb25kLmNmZwovZXRjL2luaXQuZC9uZXdyZWxpYy1zeXNtb25kIHN0YXJ0CgojIFVzaW5nIGEgZGlmZmVyZW50IENJRFIgZm9yIERvY2tlciAobm90IHRvIGNvbmZsaWN0IHdpdGggY29yZUlUIFZQQyBDSURSKQpzZWQgLWkgJyQgZCcgL2V0Yy9zeXNjb25maWcvZG9ja2VyCmVjaG8gJ09QVElPTlM9Ii0tZGVmYXVsdC11bGltaXQgbm9maWxlPTEwMjQ6NDA5NiAtLWJpcD0xOTIuMTY4LjUuMS8yNCInID4+IC9ldGMvc3lzY29uZmlnL2RvY2tlcgpzZXJ2aWNlIGRvY2tlciBzdG9wCmlwIGxpbmsgc2V0IGRvY2tlcjAgZG93bgppcCBsaW5rIGRlbGV0ZSBkb2NrZXIwCnNlcnZpY2UgZG9ja2VyIHN0YXJ0CgojIFJlc3RhcnRpbmcgRUNTCnN0YXJ0IGVjcwoNCi0tTUlNRUJPVU5EQVJZLS0NCg=="
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                }
            },
            "depends_on": []
        },
        {
            "path": [
                "root",
                "rds-cluster"
            ],
            "outputs": {
                "endpoint": {
                    "sensitive": false,
                    "type": "string",
                    "value": "engineering-preprods.cnfn2tun3mjw.us-west-2.rds.amazonaws.com:3306"
                },
                "id": {
                    "sensitive": false,
                    "type": "string",
                    "value": "engineering-preprods"
                },
                "port": {
                    "sensitive": false,
                    "type": "string",
                    "value": "3306"
                }
            },
            "resources": {
                "aws_db_instance.main": {
                    "type": "aws_db_instance",
                    "depends_on": [
                        "aws_db_subnet_group.main",
                        "aws_security_group.main"
                    ],
                    "primary": {
                        "id": "engineering-preprods",
                        "attributes": {
                            "address": "engineering-preprods.cnfn2tun3mjw.us-west-2.rds.amazonaws.com",
                            "allocated_storage": "100",
                            "arn": "arn:aws:rds:us-west-2:433610389961:db:engineering-preprods",
                            "auto_minor_version_upgrade": "true",
                            "availability_zone": "us-west-2c",
                            "backup_retention_period": "5",
                            "backup_window": "07:00-09:00",
                            "copy_tags_to_snapshot": "false",
                            "db_subnet_group_name": "engineering-preprods",
                            "endpoint": "engineering-preprods.cnfn2tun3mjw.us-west-2.rds.amazonaws.com:3306",
                            "engine": "mariadb",
                            "engine_version": "10.1.19",
                            "hosted_zone_id": "Z1PVIF0B656C1W",
                            "id": "engineering-preprods",
                            "identifier": "engineering-preprods",
                            "instance_class": "db.r3.large",
                            "iops": "0",
                            "kms_key_id": "",
                            "license_model": "general-public-license",
                            "maintenance_window": "mon:00:00-mon:03:00",
                            "monitoring_interval": "0",
                            "multi_az": "false",
                            "name": "",
                            "option_group_name": "default:mariadb-10-1",
                            "parameter_group_name": "engineering",
                            "password": "buanCAWwwAGxUyoU2Fai",
                            "port": "3306",
                            "publicly_accessible": "false",
                            "replicas.#": "0",
                            "replicate_source_db": "",
                            "security_group_names.#": "0",
                            "skip_final_snapshot": "true",
                            "status": "available",
                            "storage_encrypted": "false",
                            "storage_type": "standard",
                            "tags.%": "3",
                            "tags.Environment": "Preprod",
                            "tags.Name": "engineering-preprods",
                            "tags.Team": "Engineering",
                            "timezone": "",
                            "username": "lfengineering",
                            "vpc_security_group_ids.#": "1",
                            "vpc_security_group_ids.1578357519": "sg-a2c886da"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_db_subnet_group.main": {
                    "type": "aws_db_subnet_group",
                    "depends_on": [],
                    "primary": {
                        "id": "engineering-preprods",
                        "attributes": {
                            "arn": "arn:aws:rds:us-west-2:433610389961:subgrp:engineering-preprods",
                            "description": "RDS cluster subnet group",
                            "id": "engineering-preprods",
                            "name": "engineering-preprods",
                            "subnet_ids.#": "3",
                            "subnet_ids.2055414451": "subnet-1a2b1442",
                            "subnet_ids.74575692": "subnet-57fe231e",
                            "subnet_ids.873240711": "subnet-da73c8bd",
                            "tags.%": "0"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_security_group.main": {
                    "type": "aws_security_group",
                    "depends_on": [],
                    "primary": {
                        "id": "sg-a2c886da",
                        "attributes": {
                            "description": "Allows traffic to rds from other security groups",
                            "egress.#": "1",
                            "egress.482069346.cidr_blocks.#": "1",
                            "egress.482069346.cidr_blocks.0": "0.0.0.0/0",
                            "egress.482069346.from_port": "0",
                            "egress.482069346.prefix_list_ids.#": "0",
                            "egress.482069346.protocol": "-1",
                            "egress.482069346.security_groups.#": "0",
                            "egress.482069346.self": "false",
                            "egress.482069346.to_port": "0",
                            "id": "sg-a2c886da",
                            "ingress.#": "1",
                            "ingress.4214650283.cidr_blocks.#": "0",
                            "ingress.4214650283.from_port": "3306",
                            "ingress.4214650283.protocol": "TCP",
                            "ingress.4214650283.security_groups.#": "1",
                            "ingress.4214650283.security_groups.4248089836": "sg-a04c11d8",
                            "ingress.4214650283.self": "false",
                            "ingress.4214650283.to_port": "3306",
                            "name": "engineering-preprods-rds-cluster",
                            "owner_id": "433610389961",
                            "tags.%": "2",
                            "tags.Environment": "Preprod",
                            "tags.Name": "RDS cluster (engineering-preprods)",
                            "vpc_id": "vpc-21254546"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                }
            },
            "depends_on": []
        },
        {
            "path": [
                "root",
                "redis-cluster"
            ],
            "outputs": {
                "id": {
                    "sensitive": false,
                    "type": "string",
                    "value": "engineering-preprods"
                },
                "port": {
                    "sensitive": false,
                    "type": "string",
                    "value": "6379"
                }
            },
            "resources": {
                "aws_elasticache_cluster.main": {
                    "type": "aws_elasticache_cluster",
                    "depends_on": [
                        "aws_elasticache_subnet_group.main",
                        "aws_security_group.main"
                    ],
                    "primary": {
                        "id": "engineering-preprods",
                        "attributes": {
                            "availability_zone": "us-west-2a",
                            "az_mode": "single-az",
                            "cache_nodes.#": "1",
                            "cache_nodes.0.address": "engineering-preprods.fbnrd8.0001.usw2.cache.amazonaws.com",
                            "cache_nodes.0.availability_zone": "us-west-2a",
                            "cache_nodes.0.id": "0001",
                            "cache_nodes.0.port": "6379",
                            "cluster_id": "engineering-preprods",
                            "engine": "redis",
                            "engine_version": "3.2.4",
                            "id": "engineering-preprods",
                            "maintenance_window": "mon:00:00-mon:03:00",
                            "node_type": "cache.t2.medium",
                            "num_cache_nodes": "1",
                            "parameter_group_name": "default.redis3.2",
                            "port": "6379",
                            "security_group_ids.#": "1",
                            "security_group_ids.172691540": "sg-a1c886d9",
                            "security_group_names.#": "0",
                            "snapshot_retention_limit": "0",
                            "snapshot_window": "",
                            "subnet_group_name": "engineering-preprods",
                            "tags.%": "3",
                            "tags.Environment": "Preprod",
                            "tags.Name": "engineering-preprods",
                            "tags.Team": "Engineering"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_elasticache_subnet_group.main": {
                    "type": "aws_elasticache_subnet_group",
                    "depends_on": [],
                    "primary": {
                        "id": "engineering-preprods",
                        "attributes": {
                            "description": "Redis subnet group",
                            "id": "engineering-preprods",
                            "name": "engineering-preprods",
                            "subnet_ids.#": "3",
                            "subnet_ids.2055414451": "subnet-1a2b1442",
                            "subnet_ids.74575692": "subnet-57fe231e",
                            "subnet_ids.873240711": "subnet-da73c8bd"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_security_group.main": {
                    "type": "aws_security_group",
                    "depends_on": [],
                    "primary": {
                        "id": "sg-a1c886d9",
                        "attributes": {
                            "description": "Allows traffic to redis from other security groups",
                            "egress.#": "1",
                            "egress.482069346.cidr_blocks.#": "1",
                            "egress.482069346.cidr_blocks.0": "0.0.0.0/0",
                            "egress.482069346.from_port": "0",
                            "egress.482069346.prefix_list_ids.#": "0",
                            "egress.482069346.protocol": "-1",
                            "egress.482069346.security_groups.#": "0",
                            "egress.482069346.self": "false",
                            "egress.482069346.to_port": "0",
                            "id": "sg-a1c886d9",
                            "ingress.#": "1",
                            "ingress.2960558185.cidr_blocks.#": "0",
                            "ingress.2960558185.from_port": "6379",
                            "ingress.2960558185.protocol": "TCP",
                            "ingress.2960558185.security_groups.#": "1",
                            "ingress.2960558185.security_groups.4248089836": "sg-a04c11d8",
                            "ingress.2960558185.self": "false",
                            "ingress.2960558185.to_port": "6379",
                            "name": "engineering-preprods-redis-node",
                            "owner_id": "433610389961",
                            "tags.%": "2",
                            "tags.Environment": "Preprod",
                            "tags.Name": "Redis node (engineering-preprods)",
                            "vpc_id": "vpc-21254546"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                }
            },
            "depends_on": []
        }
    ]
}
